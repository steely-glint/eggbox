<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="eggbox.js">
</script>
<H1>Test for audio echo canceller.</H1>
<div id="startbutton" onclick="connect();">Connect</div>
<div id="playbutton" onclick="play();">Play</div>


<audio id="ding"  controls  controlslist="nodownload"></audio>
<audio id="dong" controls  controlslist="nodownload"></audio>
<script>
    document.onload
    var local = false;
    var eggbox;
    var ding;
    var dong;
    window.onload = (event) => {
        console.log('page is fully loaded');
        ding = document.getElementById("ding");
        dong = document.getElementById("dong");
        eggbox = new Eggbox(ding,dong);

        ding.addEventListener('loadeddata', function() {
            console.log("ding loaded data "+ding.readyState);
        });
        dong.addEventListener('loadeddata', function() {
            console.log("dong loaded data "+dong.readyState);
        });
    };
    function play(){
        ding.muted = true;
        ding.play();
        dong.muted = false;
        dong.play();
    }
    function connect(){
        eggbox.startCall();
        ding.setAttribute("src","distributedFuture-70.mp3");
    }
</script>

</body>
</html>